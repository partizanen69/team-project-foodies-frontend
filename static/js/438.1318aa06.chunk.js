"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[438,781,594],{9781:(s,e,a)=>{a.r(e),a.d(e,{default:()=>h});var l=a(5043),o=a(3003),t=a(3216),i=a(8958),r=a(4564);const n="LogoutForm_logout_title__0nRIl",c="LogoutForm_logout_text__3fohi",d="LogoutForm_logout_btn__UixqU",_="LogoutForm_logout_buttons__Miq70",u="LogoutForm_loader_overlay__kbs84";var m=a(579);const h=s=>{let{closeModal:e}=s;const a=(0,o.wA)(),h=(0,t.Zp)(),{loading:f}=(0,o.d4)((s=>s.auth)),[,x]=(0,l.useState)(!1);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h2",{className:n,children:"LOG OUT"}),(0,m.jsx)("p",{className:c,children:"You can always log back in at my time."}),(0,m.jsxs)("div",{className:_,children:[(0,m.jsx)("button",{onClick:()=>{a((0,r.ri)()),x(!1),e(),h("/")},className:d,type:"button",children:"LOGOUT"}),(0,m.jsx)("button",{onClick:e,className:d,type:"button",children:"CANCEL"})]}),f&&(0,m.jsx)("div",{className:u,children:(0,m.jsx)(i.default,{})})]})}},9594:(s,e,a)=>{a.r(e),a.d(e,{default:()=>n});var l=a(5043);const o="Modal_modal_overlay__0uG9G",t="Modal_modal_content__8KQIg",i="Modal_modal_close__qzRzF";var r=a(579);const n=s=>{let{isOpen:e,onClose:a,children:n}=s;return(0,l.useEffect)((()=>{const s=s=>{"Escape"===s.key&&a()};return e&&window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}}),[e,a]),e?(0,r.jsx)("div",{className:o,onClick:a,children:(0,r.jsxs)("div",{className:t,onClick:s=>s.stopPropagation(),children:[(0,r.jsx)("button",{className:i,onClick:a,children:(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M18 6L6 18",stroke:"#050505",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M6 6L18 18",stroke:"#050505",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),n]})}):null}},6438:(s,e,a)=>{a.r(e),a.d(e,{default:()=>W});var l=a(3216),o=a(5043),t=a(3003);const i="ProfilePage_main_container__xY-uC",r="ProfilePage_main_content__z1SzY";var n=a(2242),c=a(7653),d=a(5823),_=a(80),u=a(8654);const m="ProfileInfo_profile_info__dfh8J",h="ProfileInfo_profile_info_card__DRxYg",f="ProfileInfo_user_name__TWPCD",x="ProfileInfo_btn_logout__npySN";var j=a(9594),p=a(9781),v=a(8958),w=a(4564),g=a(8179),N=a(3719);const k="DetailsList_details_list__sI4go",y="DetailsList_details_list_item__T34GD",C="DetailsList_item_key__kriq9",L="DetailsList_item_value__Wlpxh";var b=a(3775),P=a(579);const O=s=>{let{userDetails:e,isLoading:a,isOwnProfile:l}=s;const o=(0,t.d4)(b.Cp);return(0,P.jsxs)("ul",{className:k,children:[(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:C,children:"Email: "}),(0,P.jsx)("span",{className:L,children:a||!e.email?"No email":e.email})]}),(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:C,children:"Added recipes: "}),(0,P.jsx)("span",{className:L,children:a||!e.recipesCount?0:e.recipesCount})]}),l&&e.hasOwnProperty("favorites")&&(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:C,children:"Favorites: "}),(0,P.jsx)("span",{className:L,children:a||!o?0:o})]}),(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:C,children:"Followers: "}),(0,P.jsx)("span",{className:L,children:a||!e.followersCount?0:e.followersCount})]}),l&&e.hasOwnProperty("followingCount")&&(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:C,children:"Following: "}),(0,P.jsx)("span",{className:L,children:a||!e.followingCount?0:e.followingCount})]})]})};var F=a(5656);const A="Avatar_profile_avatar_block__P1gv7",U="Avatar_profile_avatar__LgrlV",I="Avatar_btn_add_avatar__yC+27",E="Avatar_plus__ZhTjb";var M=a(4506);const R=s=>{var e;let{avatar:a,isOwnProfile:l}=s;const i=(0,t.wA)(),{user:r}=(0,t.d4)((s=>s.auth)),[n,c]=(0,o.useState)(null!==(e=null===r||void 0===r?void 0:r.avatarURL)&&void 0!==e?e:"");return(0,o.useEffect)((()=>{c(l?(0,F.U9)(null===r||void 0===r?void 0:r.avatarURL):(0,F.U9)(a))}),[null===r||void 0===r?void 0:r.avatarURL,a,l]),(0,P.jsxs)("div",{className:A,children:[(0,P.jsx)("img",{alt:"User avatar",src:n,className:U,onError:()=>i((0,w.vY)(null))}),l&&(0,P.jsxs)("label",{htmlFor:"avatar",className:I,children:[(0,P.jsx)(M.A,{name:"icon-plus",className:E}),(0,P.jsx)("input",{style:{display:"none"},type:"file",id:"avatar",name:"avatar",accept:".jpg, .jpeg, .png",onChange:async s=>{const e=s.target.files[0];if(!e)return;const a=new FormData;a.append("avatar",e);try{i((0,w.Oh)(a))}catch(l){console.log(l)}}})]})]})},S=s=>{let{userId:e,isOwnProfile:a}=s;const i=(0,t.wA)(),r=(0,l.Zp)(),n=(0,l.zy)(),c=(0,t.d4)(b.SS),[d,_]=(0,o.useState)(!0),[u,k]=(0,o.useState)({}),[y,C]=(0,o.useState)(!1),L=n.pathname.split("/"),A=L[L.length-1],U=()=>{C(!1)};return(0,o.useEffect)((()=>{(async()=>{try{if(!e)return;const s=await(0,g.ON)({id:e});k(s),i((0,N.CI)(s.favorites))}catch(s){console.log(s)}finally{_(!1)}})()}),[i,e]),(0,P.jsxs)(o.Suspense,{fallback:(0,P.jsx)(v.default,{}),children:[(0,P.jsxs)("div",{className:m,children:[(0,P.jsxs)("div",{className:h,children:[(0,P.jsx)(R,{avatar:u.avatarURL,isOwnProfile:a}),(0,P.jsx)("p",{className:f,children:d||!u.name?"User name":u.name}),(0,P.jsx)(O,{userDetails:u,isLoading:d,isOwnProfile:a})]}),a?(0,P.jsx)("button",{type:"submit",className:x,onClick:()=>{C(!0)},children:"Log Out"}):u.isFollowing?(0,P.jsx)("button",{className:x,onClick:()=>{(async()=>{try{if(!e)return;if(await(0,g.Qt)(u.id),k((s=>({...s,followersCount:u.followersCount-1,isFollowing:!1}))),"followers"===A){const s=await(0,g.ri)({id:e,page:1,limit:c});i((0,N.dT)(s.followers))}}catch(s){console.log(s)}})()},children:"Following"}):(0,P.jsx)("button",{className:x,onClick:()=>{(async()=>{try{if(!e)return;if(await(0,g.pV)(u.id),k((s=>({...s,followersCount:u.followersCount+1,isFollowing:!0}))),"followers"===A){const s=await(0,g.ri)({id:e,page:1,limit:c});i((0,N.dT)(s.followers))}}catch(s){(0,F.Qg)(s.message)}})()},children:"Follow"})]}),y&&(0,P.jsx)(j.default,{isOpen:y,onClose:U,children:(0,P.jsx)(p.default,{handleLogOut:()=>{i((0,w.ri)()),U(),r("/")},closeModal:U})})]})};var T=a(5475);const D="ProfileTabs_tabs_container__REqVB",z="ProfileTabs_tabs_list__jkHOB",q="ProfileTabs_tab_item__RX8Us",G="ProfileTabs_active__xNjl6",Y=s=>{let{userId:e,isOwnProfile:a}=s;const o=(0,l.zy)(),t=s=>{let{isActive:e}=s;return e?G:""};return(0,P.jsxs)("div",{className:D,children:[(0,P.jsxs)("ul",{className:z,children:[(0,P.jsx)("li",{className:q,children:(0,P.jsx)(T.k2,{to:"/user/".concat(e,"/recipies"),state:{from:o},className:t,children:a?"My recipes":"Recipes"})}),a&&(0,P.jsx)("li",{className:q,children:(0,P.jsx)(T.k2,{to:"/user/".concat(e,"/favorites"),state:{from:o},className:t,children:"My favorites"})}),(0,P.jsx)("li",{className:q,children:(0,P.jsx)(T.k2,{to:"/user/".concat(e,"/followers"),state:{from:o},className:t,children:"Followers"})}),a&&(0,P.jsx)("li",{className:q,children:(0,P.jsx)(T.k2,{to:"/user/".concat(e,"/following"),state:{from:o},className:t,children:"Following"})})]}),(0,P.jsx)(l.sv,{})]})},W=()=>{const{id:s}=(0,l.g)(),{user:e}=(0,t.d4)((s=>s.auth)),[a,m]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{e&&e.id&&s&&m(e.id===s)}),[e,s]),(0,P.jsxs)(n.default,{className:i,children:[(0,P.jsx)(_.M,{currentPageName:"profile"}),(0,P.jsx)(c.A,{children:"Profile"}),(0,P.jsx)(d.A,{children:"Reveal your culinary art, share your favorite recipe and create gastronomic masterpieces with us."}),(0,P.jsxs)("div",{className:r,children:[(0,P.jsx)(S,{userId:s,isOwnProfile:a}),(0,P.jsx)(Y,{userId:s,isOwnProfile:a})]}),(0,P.jsx)(u.A,{})]})}}}]);
//# sourceMappingURL=438.1318aa06.chunk.js.map