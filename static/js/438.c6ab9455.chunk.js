"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[438,781,594],{9781:(s,e,a)=>{a.r(e),a.d(e,{default:()=>h});var l=a(5043),t=a(3003),o=a(3216),i=a(8958),n=a(4564);const r="LogoutForm_logout_title__0nRIl",c="LogoutForm_logout_text__3fohi",d="LogoutForm_logout_btn__UixqU",_="LogoutForm_logout_buttons__Miq70",u="LogoutForm_loader_overlay__kbs84";var m=a(579);const h=s=>{let{closeModal:e}=s;const a=(0,t.wA)(),h=(0,o.Zp)(),{loading:f}=(0,t.d4)((s=>s.auth)),[,x]=(0,l.useState)(!1);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h2",{className:r,children:"LOG OUT"}),(0,m.jsx)("p",{className:c,children:"You can always log back in at my time."}),(0,m.jsxs)("div",{className:_,children:[(0,m.jsx)("button",{onClick:()=>{a((0,n.ri)()),x(!1),e(),h("/")},className:d,type:"button",children:"LOGOUT"}),(0,m.jsx)("button",{onClick:e,className:d,type:"button",children:"CANCEL"})]}),f&&(0,m.jsx)("div",{className:u,children:(0,m.jsx)(i.default,{})})]})}},9594:(s,e,a)=>{a.r(e),a.d(e,{default:()=>r});var l=a(5043);const t="Modal_modal_overlay__0uG9G",o="Modal_modal_content__8KQIg",i="Modal_modal_close__qzRzF";var n=a(579);const r=s=>{let{isOpen:e,onClose:a,children:r}=s;return(0,l.useEffect)((()=>{const s=s=>{"Escape"===s.key&&a()};return e&&window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}}),[e,a]),e?(0,n.jsx)("div",{className:t,onClick:a,children:(0,n.jsxs)("div",{className:o,onClick:s=>s.stopPropagation(),children:[(0,n.jsx)("button",{className:i,onClick:a,children:(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M18 6L6 18",stroke:"#050505",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M6 6L18 18",stroke:"#050505",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),r]})}):null}},6438:(s,e,a)=>{a.r(e),a.d(e,{default:()=>Y});var l=a(3216),t=a(5043),o=a(3003);const i="ProfilePage_main_container__xY-uC",n="ProfilePage_main_content__z1SzY";var r=a(2242),c=a(7653),d=a(5823),_=a(80),u=a(8654);const m="ProfileInfo_profile_info__dfh8J",h="ProfileInfo_profile_info_card__DRxYg",f="ProfileInfo_user_name__TWPCD",x="ProfileInfo_btn_logout__npySN";var j=a(9594),p=a(9781),v=a(8958),w=a(4564),g=a(8179),N=a(3719);const k="DetailsList_details_list__sI4go",y="DetailsList_details_list_item__T34GD",b="DetailsList_item_key__kriq9",C="DetailsList_item_value__Wlpxh";var L=a(3775),P=a(579);const O=s=>{let{userDetails:e,isLoading:a,isOwnProfile:l}=s;const t=(0,o.d4)(L.Cp);return(0,P.jsxs)("ul",{className:k,children:[(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:b,children:"Email: "}),(0,P.jsx)("span",{className:C,children:a||!e.email?"No email":e.email})]}),(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:b,children:"Added recipes: "}),(0,P.jsx)("span",{className:C,children:a||!e.recipesCount?0:e.recipesCount})]}),l&&e.hasOwnProperty("favorites")&&(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:b,children:"Favorites: "}),(0,P.jsx)("span",{className:C,children:a||!t?0:t})]}),(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:b,children:"Followers: "}),(0,P.jsx)("span",{className:C,children:a||!e.followersCount?0:e.followersCount})]}),l&&e.hasOwnProperty("followingCount")&&(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:b,children:"Following: "}),(0,P.jsx)("span",{className:C,children:a||!e.followingCount?0:e.followingCount})]})]})};var F=a(5656);const A="Avatar_profile_avatar_block__P1gv7",I="Avatar_profile_avatar__LgrlV",T="Avatar_btn_add_avatar__yC+27",D="Avatar_plus__ZhTjb";var E=a(4506);const M=s=>{let{avatar:e,isOwnProfile:a}=s;const[l,o]=(0,t.useState)(e);(0,t.useEffect)((()=>{o(e)}),[e]);return(0,P.jsxs)("div",{className:A,children:[(0,P.jsx)("img",{alt:"User avatar",src:(0,F.U9)(l),className:I,onError:()=>o(null)}),a&&(0,P.jsxs)("label",{htmlFor:"avatar",className:T,children:[(0,P.jsx)(E.A,{name:"icon-plus",className:D}),(0,P.jsx)("input",{style:{display:"none"},type:"file",id:"avatar",name:"avatar",accept:".jpg, .jpeg, .png",onChange:async s=>{const e=s.target.files[0];if(!e)return;const a=new FormData;a.append("avatar",e);try{const s=await(0,g.xG)(a),e="updated=".concat((new Date).getTime());o("".concat(s.avatarURL,"?").concat(e))}catch(l){console.log(l)}}})]})]})},U=s=>{let{userId:e,isOwnProfile:a}=s;const i=(0,o.wA)(),n=(0,l.Zp)(),[r,c]=(0,t.useState)(!0),[d,_]=(0,t.useState)({}),[u,k]=(0,t.useState)(!1),y=()=>{k(!1)};return(0,t.useEffect)((()=>{(async()=>{try{if(!e)return;const s=await(0,g.ON)({id:e});_(s),i((0,N.CI)(s.favorites))}catch(s){console.log(s)}finally{c(!1)}})()}),[i,e]),(0,P.jsxs)(t.Suspense,{fallback:(0,P.jsx)(v.default,{}),children:[(0,P.jsxs)("div",{className:m,children:[(0,P.jsxs)("div",{className:h,children:[(0,P.jsx)(M,{avatar:d.avatarURL,isOwnProfile:a}),(0,P.jsx)("p",{className:f,children:r||!d.name?"User name":d.name}),(0,P.jsx)(O,{userDetails:d,isLoading:r,isOwnProfile:a})]}),a?(0,P.jsx)("button",{type:"submit",className:x,onClick:()=>{k(!0)},children:"Log Out"}):d.isFollowing?(0,P.jsx)("button",{className:x,onClick:()=>{(async()=>{try{if(!e)return;await(0,g.Qt)(d.id),_((s=>({...s,isFollowing:!1})));const s=await(0,g.ri)({id:e,page:1,limit:9});i((0,N.dT)(s.followers))}catch(s){console.log(s)}})()},children:"Following"}):(0,P.jsx)("button",{className:x,onClick:()=>{(async()=>{try{if(!e)return;await(0,g.pV)(d.id),_((s=>({...s,isFollowing:!0})));const s=await(0,g.ri)({id:e,page:1,limit:9});i((0,N.dT)(s.followers))}catch(s){console.log(s)}})()},children:"Follow"})]}),u&&(0,P.jsx)(j.default,{isOpen:u,onClose:y,children:(0,P.jsx)(p.default,{handleLogOut:()=>{i((0,w.ri)()),y(),n("/")},closeModal:y})})]})};var R=a(5475);const S="ProfileTabs_tabs_container__REqVB",G="ProfileTabs_tabs_list__jkHOB",q="ProfileTabs_tab_item__RX8Us",z="ProfileTabs_active__xNjl6",W=s=>{let{userId:e,isOwnProfile:a}=s;const t=(0,l.zy)(),o=s=>{let{isActive:e}=s;return e?z:""};return(0,P.jsxs)("div",{className:S,children:[(0,P.jsxs)("ul",{className:G,children:[(0,P.jsx)("li",{className:q,children:(0,P.jsx)(R.k2,{to:"/user/".concat(e,"/recipies"),state:{from:t},className:o,children:a?"My recipes":"Recipes"})}),a&&(0,P.jsx)("li",{className:q,children:(0,P.jsx)(R.k2,{to:"/user/".concat(e,"/favorites"),state:{from:t},className:o,children:"My favorites"})}),(0,P.jsx)("li",{className:q,children:(0,P.jsx)(R.k2,{to:"/user/".concat(e,"/followers"),state:{from:t},className:o,children:"Followers"})}),a&&(0,P.jsx)("li",{className:q,children:(0,P.jsx)(R.k2,{to:"/user/".concat(e,"/following"),state:{from:t},className:o,children:"Following"})})]}),(0,P.jsx)(l.sv,{})]})},Y=()=>{const{id:s}=(0,l.g)(),{user:e}=(0,o.d4)((s=>s.auth)),[a,m]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{e&&e.id&&s&&m(e.id===s)}),[e,s]),(0,P.jsxs)(r.default,{className:i,children:[(0,P.jsx)(_.M,{currentPageName:"profile"}),(0,P.jsx)(c.A,{children:"Profile"}),(0,P.jsx)(d.A,{children:"Reveal your culinary art, share your favorite recipe and create gastronomic masterpieces with us."}),(0,P.jsxs)("div",{className:n,children:[(0,P.jsx)(U,{userId:s,isOwnProfile:a}),(0,P.jsx)(W,{userId:s,isOwnProfile:a})]}),(0,P.jsx)(u.A,{})]})}}}]);
//# sourceMappingURL=438.c6ab9455.chunk.js.map