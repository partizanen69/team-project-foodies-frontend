"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[920,781,594],{781:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});a(43);const t="LogoutForm_logout_title__0nRIl",l="LogoutForm_logout_text__3fohi",r="LogoutForm_logout_btn__UixqU",n="LogoutForm_logout_buttons__Miq70";var o=a(579);const i=e=>{let{handleLogOut:s,closeModal:a}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{className:t,children:"LOG OUT"}),(0,o.jsx)("p",{className:l,children:"You can always log back in at my time."}),(0,o.jsxs)("div",{className:n,children:[(0,o.jsx)("button",{onClick:s,className:r,type:"button",children:"LOGOUT"}),(0,o.jsx)("button",{onClick:a,className:r,type:"button",children:"CANCEL"})]})]})}},594:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var t=a(43);const l="Modal_modal_overlay__0uG9G",r="Modal_modal_content__8KQIg",n="Modal_modal_close__qzRzF";var o=a(579);const i=e=>{let{isOpen:s,onClose:a,children:i}=e;return(0,t.useEffect)((()=>{const e=e=>{"Escape"===e.key&&a()};return s&&window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[s,a]),s?(0,o.jsx)("div",{className:l,onClick:a,children:(0,o.jsxs)("div",{className:r,onClick:e=>e.stopPropagation(),children:[(0,o.jsx)("button",{className:n,onClick:a,children:(0,o.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M18 6L6 18",stroke:"#050505",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M6 6L18 18",stroke:"#050505",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),i]})}):null}},920:(e,s,a)=>{a.r(s),a.d(s,{default:()=>W});var t=a(216),l=a(43),r=a(3);const n="ProfilePage_main_container__xY-uC",o="ProfilePage_main_content__z1SzY";var i=a(4);const c="MainTitle_title__k2iVV";var d=a(579);const _=e=>{let{children:s}=e;return(0,d.jsx)("h2",{className:c,children:s})},u="Subtitle_subtitle__Y5mSh",h=e=>{let{children:s}=e;return(0,d.jsx)("p",{className:u,children:s})};var m=a(80);const f="ProfileInfo_profile_info__dfh8J",j="ProfileInfo_profile_info_card__DRxYg",x="ProfileInfo_user_name__TWPCD",p="ProfileInfo_details_list__pR40l",v="ProfileInfo_details_list_item__c9s3k",g="ProfileInfo_item_key__qlr9P",N="ProfileInfo_item_value__4zTXb",w="ProfileInfo_btn_logout__npySN";var k=a(594),y=a(781),b=a(958),P=a(564);const L="Avatar_profile_avatar_block__HWo1H",C="Avatar_profile_avatar__etkkF",O="Avatar_btn_add_avatar__DErjX",F="Avatar_plus__pKvO3";var I=a(213),E=a(656);var M=a(382);const A=e=>{let{avatar:s}=e;const[a,t]=(0,l.useState)(s);(0,l.useEffect)((()=>{t(s)}),[s]);return(0,d.jsxs)("div",{className:L,children:[(0,d.jsx)("img",{alt:"User avatar",src:(e=>e?e.startsWith("http://")?e:"".concat("https://team-project-foodies-backend.onrender.com/").concat(e):"".concat("/team-project-foodies-frontend","/avatar-placeholder.svg"))(a),className:C,onError:()=>t(null)}),(0,d.jsxs)("label",{htmlFor:"avatar",className:O,children:[(0,d.jsx)(M.A,{name:"icon-plus",width:"16",height:"16",className:F}),(0,d.jsx)("input",{style:{display:"none"},type:"file",id:"avatar",name:"avatar",accept:".jpg, .jpeg, .png",onChange:async e=>{const s=e.target.files[0];if(!s)return;const a=new FormData;a.append("avatar",s);try{const e=await(async e=>{try{return(await I.A.patch("/users/avatars",e)).data}catch(s){(0,E.r)(s)}})(a),s="updated=".concat((new Date).getTime());t("".concat(e.avatarURL,"?").concat(s))}catch(l){console.log(l)}}})]})]})},S=e=>{let{userId:s,isOwnProfile:a}=e;const n=(0,r.wA)(),o=(0,t.Zp)(),[i,c]=(0,l.useState)(!0),[_,u]=(0,l.useState)({}),[h,m]=(0,l.useState)(!1),L=()=>{m(!1)};return(0,l.useEffect)((()=>{(async()=>{try{if(!s)return;const e=await(async e=>{let{id:s}=e;try{return(await I.A.get("/users/user-details/".concat(s))).data}catch(a){(0,E.r)(a)}})({id:s});u(e)}catch(e){console.log(e)}finally{c(!1)}})()}),[s]),(0,d.jsxs)(l.Suspense,{fallback:(0,d.jsx)(b.default,{}),children:[(0,d.jsxs)("div",{className:f,children:[(0,d.jsxs)("div",{className:j,children:[(0,d.jsx)(A,{avatar:_.avatarURL}),(0,d.jsx)("p",{className:x,children:i?"Loading...":_.name}),(0,d.jsxs)("ul",{className:p,children:[(0,d.jsxs)("li",{className:v,children:[(0,d.jsx)("p",{className:g,children:"Email: "}),(0,d.jsx)("span",{className:N,children:i?"Loading...":_.email})]}),(0,d.jsxs)("li",{className:v,children:[(0,d.jsx)("p",{className:g,children:"Added recipes: "}),(0,d.jsx)("span",{className:N,children:i?"Loading...":_.recipesCount})]}),a&&_.hasOwnProperty("favorites")&&(0,d.jsxs)("li",{className:v,children:[(0,d.jsx)("p",{className:g,children:"Favorites: "}),(0,d.jsx)("span",{className:N,children:i?"Loading...":_.favorites})]}),(0,d.jsxs)("li",{className:v,children:[(0,d.jsx)("p",{className:g,children:"Followers: "}),(0,d.jsx)("span",{className:N,children:i?"Loading...":_.followersCount})]}),a&&_.hasOwnProperty("followingCount")&&(0,d.jsxs)("li",{className:v,children:[(0,d.jsx)("p",{className:g,children:"Following: "}),(0,d.jsx)("span",{className:N,children:i?"Loading...":_.followingCount})]})]})]}),a?(0,d.jsx)("button",{type:"submit",className:w,onClick:()=>{m(!0)},children:"Log Out"}):(0,d.jsx)("button",{className:w,children:"Follow"})]}),h&&(0,d.jsx)(k.default,{isOpen:h,onClose:L,children:(0,d.jsx)(y.default,{handleLogOut:()=>{n((0,P.ri)()),L(),o("/")},closeModal:L})})]})};var T=a(475);const R="ProfileTabs_tabs_container__REqVB",U="ProfileTabs_tabs_list__jkHOB",z="ProfileTabs_tab_item__RX8Us",q="ProfileTabs_active__xNjl6",D=e=>{let{userId:s,isOwnProfile:a}=e;const l=(0,t.zy)();return(0,d.jsxs)("div",{className:R,children:[(0,d.jsxs)("ul",{className:U,children:[(0,d.jsx)("li",{className:z,children:(0,d.jsx)(T.k2,{to:"/user/".concat(s,"/recipies"),state:{from:l},activeclassname:q,children:"My recipes"})}),a&&(0,d.jsx)("li",{className:z,children:(0,d.jsx)(T.k2,{to:"/user/".concat(s,"/favorites"),state:{from:l},activeclassname:q,children:"My favorites"})}),(0,d.jsx)("li",{className:z,children:(0,d.jsx)(T.k2,{to:"/user/".concat(s,"/followers"),state:{from:l},activeclassname:q,children:"Followers"})}),a&&(0,d.jsx)("li",{className:z,children:(0,d.jsx)(T.k2,{to:"/user/".concat(s,"/following"),state:{from:l},activeclassname:q,children:"Following"})})]}),(0,d.jsx)(t.sv,{})]})},W=()=>{const{id:e}=(0,t.g)(),{user:s}=(0,r.d4)((e=>e.auth)),[a,c]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{s&&s.id&&e&&c(s.id===e)}),[s,e]),(0,d.jsxs)(i.default,{className:n,children:[(0,d.jsx)(m.M,{currentPageName:"profile"}),(0,d.jsx)(_,{children:"Profile"}),(0,d.jsx)(h,{children:"Reveal your culinary art, share your favorite recipe and create gastronomic masterpieces with us."}),(0,d.jsxs)("div",{className:o,children:[(0,d.jsx)(S,{userId:e,isOwnProfile:a}),(0,d.jsx)(D,{userId:e,isOwnProfile:a})]})]})}}}]);
//# sourceMappingURL=920.6b84dcc1.chunk.js.map