"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[636,781,594],{9781:(e,s,a)=>{a.r(s),a.d(s,{default:()=>_});a(5043);var l=a(3003),o=a(8958);const t="LogoutForm_logout_title__0nRIl",n="LogoutForm_logout_text__3fohi",i="LogoutForm_logout_btn__UixqU",r="LogoutForm_logout_buttons__Miq70",c="LogoutForm_loader_overlay__kbs84";var d=a(579);const _=e=>{let{handleLogOut:s,closeModal:a}=e;const{loading:_}=(0,l.d4)((e=>e.auth));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h2",{className:t,children:"LOG OUT"}),(0,d.jsx)("p",{className:n,children:"You can always log back in at my time."}),(0,d.jsxs)("div",{className:r,children:[(0,d.jsx)("button",{onClick:s,className:i,type:"button",children:"LOGOUT"}),(0,d.jsx)("button",{onClick:a,className:i,type:"button",children:"CANCEL"})]}),_&&(0,d.jsx)("div",{className:c,children:(0,d.jsx)(o.default,{})})]})}},9594:(e,s,a)=>{a.r(s),a.d(s,{default:()=>r});var l=a(5043);const o="Modal_modal_overlay__0uG9G",t="Modal_modal_content__8KQIg",n="Modal_modal_close__qzRzF";var i=a(579);const r=e=>{let{isOpen:s,onClose:a,children:r}=e;return(0,l.useEffect)((()=>{const e=e=>{"Escape"===e.key&&a()};return s&&window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[s,a]),s?(0,i.jsx)("div",{className:o,onClick:a,children:(0,i.jsxs)("div",{className:t,onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("button",{className:n,onClick:a,children:(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M18 6L6 18",stroke:"#050505",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M6 6L18 18",stroke:"#050505",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),r]})}):null}},5636:(e,s,a)=>{a.r(s),a.d(s,{default:()=>D});var l=a(3216),o=a(5043),t=a(3003);const n="ProfilePage_main_container__xY-uC",i="ProfilePage_main_content__z1SzY";var r=a(2242),c=a(7653),d=a(5823),_=a(80);const u="ProfileInfo_profile_info__dfh8J",m="ProfileInfo_profile_info_card__DRxYg",h="ProfileInfo_user_name__TWPCD",f="ProfileInfo_details_list__pR40l",x="ProfileInfo_details_list_item__c9s3k",j="ProfileInfo_item_key__qlr9P",p="ProfileInfo_item_value__4zTXb",g="ProfileInfo_btn_logout__npySN";var v=a(9594),w=a(9781),N=a(8958),k=a(4564),y=a(5656);const b="Avatar_profile_avatar_block__HWo1H",P="Avatar_profile_avatar__etkkF",L="Avatar_btn_add_avatar__DErjX",C="Avatar_plus__pKvO3";var F=a(8179),O=a(4506),I=a(579);const E=e=>{let{avatar:s,isOwnProfile:a}=e;const[l,t]=(0,o.useState)(s);(0,o.useEffect)((()=>{t(s)}),[s]);return(0,I.jsxs)("div",{className:b,children:[(0,I.jsx)("img",{alt:"User avatar",src:(0,y.U9)(l),className:P,onError:()=>t(null)}),a&&(0,I.jsxs)("label",{htmlFor:"avatar",className:L,children:[(0,I.jsx)(O.A,{name:"icon-plus",className:C}),(0,I.jsx)("input",{style:{display:"none"},type:"file",id:"avatar",name:"avatar",accept:".jpg, .jpeg, .png",onChange:async e=>{const s=e.target.files[0];if(!s)return;const a=new FormData;a.append("avatar",s);try{const e=await(0,F.xG)(a),s="updated=".concat((new Date).getTime());t("".concat(e.avatarURL,"?").concat(s))}catch(l){console.log(l)}}})]})]})};var M=a(3719);const T=e=>{let{userId:s,isOwnProfile:a}=e;const n=(0,t.wA)(),i=(0,l.Zp)(),[r,c]=(0,o.useState)(!0),[d,_]=(0,o.useState)({}),[y,b]=(0,o.useState)(!1),P=()=>{b(!1)};return(0,o.useEffect)((()=>{(async()=>{try{if(!s)return;const e=await(0,F.ON)({id:s});_(e)}catch(e){console.log(e)}finally{c(!1)}})()}),[s]),(0,I.jsxs)(o.Suspense,{fallback:(0,I.jsx)(N.default,{}),children:[(0,I.jsxs)("div",{className:u,children:[(0,I.jsxs)("div",{className:m,children:[(0,I.jsx)(E,{avatar:d.avatarURL}),(0,I.jsx)("p",{className:h,children:r?"Loading...":d.name}),(0,I.jsxs)("ul",{className:f,children:[(0,I.jsxs)("li",{className:x,children:[(0,I.jsx)("p",{className:j,children:"Email: "}),(0,I.jsx)("span",{className:p,children:r?"Loading...":d.email})]}),(0,I.jsxs)("li",{className:x,children:[(0,I.jsx)("p",{className:j,children:"Added recipes: "}),(0,I.jsx)("span",{className:p,children:r?"Loading...":d.recipesCount})]}),a&&d.hasOwnProperty("favorites")&&(0,I.jsxs)("li",{className:x,children:[(0,I.jsx)("p",{className:j,children:"Favorites: "}),(0,I.jsx)("span",{className:p,children:r?"Loading...":d.favorites})]}),(0,I.jsxs)("li",{className:x,children:[(0,I.jsx)("p",{className:j,children:"Followers: "}),(0,I.jsx)("span",{className:p,children:r?"Loading...":d.followersCount})]}),a&&d.hasOwnProperty("followingCount")&&(0,I.jsxs)("li",{className:x,children:[(0,I.jsx)("p",{className:j,children:"Following: "}),(0,I.jsx)("span",{className:p,children:r?"Loading...":d.followingCount})]})]})]}),console.log(d.isFollowing),a?(0,I.jsx)("button",{type:"submit",className:g,onClick:()=>{b(!0)},children:"Log Out"}):d.isFollowing?(0,I.jsx)("button",{className:g,onClick:()=>{(async()=>{try{if(!s)return;await(0,F.Qt)(d.id),_((e=>({...e,isFollowing:!1})));const e=await(0,F.ri)({id:s,page:1,limit:9});n((0,M.dT)(e.followers))}catch(e){console.log(e)}})()},children:"Following"}):(0,I.jsx)("button",{className:g,onClick:()=>{(async()=>{try{if(!s)return;await(0,F.pV)(d.id),_((e=>({...e,isFollowing:!0})));const e=await(0,F.ri)({id:s,page:1,limit:9});n((0,M.dT)(e.followers))}catch(e){console.log(e)}})()},children:"Follow"})]}),y&&(0,I.jsx)(v.default,{isOpen:y,onClose:P,children:(0,I.jsx)(w.default,{handleLogOut:()=>{n((0,k.ri)()),P(),i("/")},closeModal:P})})]})};var A=a(5475);const R="ProfileTabs_tabs_container__REqVB",U="ProfileTabs_tabs_list__jkHOB",S="ProfileTabs_tab_item__RX8Us",z="ProfileTabs_active__xNjl6",q=e=>{let{userId:s,isOwnProfile:a}=e;const o=(0,l.zy)();return(0,I.jsxs)("div",{className:R,children:[(0,I.jsxs)("ul",{className:U,children:[(0,I.jsx)("li",{className:S,children:(0,I.jsx)(A.k2,{to:"/user/".concat(s,"/recipies"),state:{from:o},activeclassname:z,children:"My recipes"})}),a&&(0,I.jsx)("li",{className:S,children:(0,I.jsx)(A.k2,{to:"/user/".concat(s,"/favorites"),state:{from:o},activeclassname:z,children:"My favorites"})}),(0,I.jsx)("li",{className:S,children:(0,I.jsx)(A.k2,{to:"/user/".concat(s,"/followers"),state:{from:o},activeclassname:z,children:"Followers"})}),a&&(0,I.jsx)("li",{className:S,children:(0,I.jsx)(A.k2,{to:"/user/".concat(s,"/following"),state:{from:o},activeclassname:z,children:"Following"})})]}),(0,I.jsx)(l.sv,{})]})},D=()=>{const{id:e}=(0,l.g)(),{user:s}=(0,t.d4)((e=>e.auth)),[a,u]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{s&&s.id&&e&&u(s.id===e)}),[s,e]),(0,I.jsxs)(r.default,{className:n,children:[(0,I.jsx)(_.M,{currentPageName:"profile"}),(0,I.jsx)(c.A,{children:"Profile"}),(0,I.jsx)(d.A,{children:"Reveal your culinary art, share your favorite recipe and create gastronomic masterpieces with us."}),(0,I.jsxs)("div",{className:i,children:[(0,I.jsx)(T,{userId:e,isOwnProfile:a}),(0,I.jsx)(q,{userId:e,isOwnProfile:a})]})]})}}}]);
//# sourceMappingURL=636.b1bf3d5a.chunk.js.map