"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[438,781,594],{9781:(e,s,a)=>{a.r(s),a.d(s,{default:()=>f});var l=a(5043),o=a(3003),t=a(3216),r=a(8958),i=a(4564);const n="LogoutForm_logout_title__0nRIl",c="LogoutForm_logout_text__3fohi",d="LogoutForm_logout_btn__UixqU",u="LogoutForm_logout_buttons__Miq70",_="LogoutForm_loader_overlay__kbs84";var m=a(579);const f=e=>{let{closeModal:s}=e;const a=(0,o.wA)(),f=(0,t.Zp)(),{loading:h}=(0,o.d4)((e=>e.auth)),[,j]=(0,l.useState)(!1);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h2",{className:n,children:"LOG OUT"}),(0,m.jsx)("p",{className:c,children:"You can always log back in at my time."}),(0,m.jsxs)("div",{className:u,children:[(0,m.jsx)("button",{onClick:()=>{a((0,i.ri)()),j(!1),s(),f("/")},className:d,type:"button",children:"LOGOUT"}),(0,m.jsx)("button",{onClick:s,className:d,type:"button",children:"CANCEL"})]}),h&&(0,m.jsx)("div",{className:_,children:(0,m.jsx)(r.default,{})})]})}},9594:(e,s,a)=>{a.r(s),a.d(s,{default:()=>n});var l=a(5043);const o="Modal_modal_overlay__0uG9G",t="Modal_modal_content__8KQIg",r="Modal_modal_close__qzRzF";var i=a(579);const n=e=>{let{isOpen:s,onClose:a,children:n}=e;return(0,l.useEffect)((()=>{const e=e=>{"Escape"===e.key&&a()};return s&&window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[s,a]),s?(0,i.jsx)("div",{className:o,onClick:a,children:(0,i.jsxs)("div",{className:t,onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("button",{className:r,onClick:a,children:(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M18 6L6 18",stroke:"#050505",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M6 6L18 18",stroke:"#050505",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),n]})}):null}},6438:(e,s,a)=>{a.r(s),a.d(s,{default:()=>B});var l=a(3216),o=a(5043),t=a(3003);const r="ProfilePage_main_container__xY-uC",i="ProfilePage_main_content__z1SzY";var n=a(2242),c=a(7653),d=a(5823),u=a(80),_=a(8654);const m="ProfileInfo_profile_info__dfh8J",f="ProfileInfo_profile_info_card__DRxYg",h="ProfileInfo_user_name__TWPCD",j="ProfileInfo_btn_logout__npySN";var x=a(9594),p=a(9781),v=a(8958),w=a(4564),g=a(8179),N=a(3719);const k="DetailsList_details_list__sI4go",y="DetailsList_details_list_item__T34GD",C="DetailsList_item_key__kriq9",b="DetailsList_item_value__Wlpxh";var L=a(3775),P=a(579);const O=e=>{let{userDetails:s,isLoading:a,isOwnProfile:l}=e;const o=(0,t.d4)(L.Cp);return(0,P.jsxs)("ul",{className:k,children:[(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:C,children:"Email: "}),(0,P.jsx)("span",{className:b,children:a||!s.email?"No email":s.email})]}),(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:C,children:"Added recipes: "}),(0,P.jsx)("span",{className:b,children:a||!s.recipesCount?0:s.recipesCount})]}),l&&s.hasOwnProperty("favorites")&&(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:C,children:"Favorites: "}),(0,P.jsx)("span",{className:b,children:a||!o?0:o})]}),(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:C,children:"Followers: "}),(0,P.jsx)("span",{className:b,children:a||!s.followersCount?0:s.followersCount})]}),l&&s.hasOwnProperty("followingCount")&&(0,P.jsxs)("li",{className:y,children:[(0,P.jsx)("p",{className:C,children:"Following: "}),(0,P.jsx)("span",{className:b,children:a||!s.followingCount?0:s.followingCount})]})]})};var F=a(5656);const R="Avatar_profile_avatar_block__P1gv7",A="Avatar_profile_avatar__LgrlV",E="Avatar_btn_add_avatar__yC+27",U="Avatar_plus__ZhTjb";var I=a(4506),S=a(3401);const M=e=>{var s;let{avatar:a,isOwnProfile:l}=e;const r=(0,t.wA)(),{user:i,loading:n}=(0,t.d4)((e=>e.auth)),[c,d]=(0,o.useState)(localStorage.getItem("avatarURL")||(null!==(s=null===i||void 0===i?void 0:i.avatarURL)&&void 0!==s?s:""));return(0,o.useEffect)((()=>{d(l?(0,F.U9)(null===i||void 0===i?void 0:i.avatarURL):(0,F.U9)(a))}),[null===i||void 0===i?void 0:i.avatarURL,a,l]),(0,P.jsxs)("div",{className:R,children:[(0,P.jsx)("img",{alt:"User avatar",src:c,className:A,onError:()=>d("".concat("/team-project-foodies-frontend","/avatar-placeholder.svg"))}),l&&(0,P.jsxs)("label",{htmlFor:"avatar",className:E,children:[(0,P.jsx)(I.A,{name:"icon-plus",className:U}),(0,P.jsx)("input",{style:{display:"none"},type:"file",id:"avatar",name:"avatar",accept:".jpg, .jpeg, .png",onChange:e=>{const s=e.target.files[0];if(!s)return;const a=new FormData;a.append("avatar",s);try{r((0,w.Oh)(a))}catch(l){S.oR.error("Error occured: ".concat(l.message)),console.error(l)}}})]}),n&&(0,P.jsx)(v.default,{})]})},T=e=>{let{userId:s,isOwnProfile:a}=e;const r=(0,t.wA)(),i=(0,l.Zp)(),n=(0,l.zy)(),c=(0,t.d4)(L.SS),[d,u]=(0,o.useState)(!0),[_,k]=(0,o.useState)({}),[y,C]=(0,o.useState)(!1),b=n.pathname.split("/"),R=b[b.length-1],A=()=>{C(!1)};return(0,o.useEffect)((()=>{(async()=>{try{if(!s)return;const e=await(0,g.ON)({id:s});k(e),r((0,N.CI)(e.favorites))}catch(e){S.oR.error("Error occured: ".concat(e.message)),console.error(e)}finally{u(!1)}})()}),[r,s]),(0,P.jsxs)(o.Suspense,{fallback:(0,P.jsx)(v.default,{}),children:[(0,P.jsxs)("div",{className:m,children:[(0,P.jsxs)("div",{className:f,children:[(0,P.jsx)(M,{avatar:_.avatarURL,isOwnProfile:a}),(0,P.jsx)("p",{className:h,children:d||!_.name?"User name":_.name}),(0,P.jsx)(O,{userDetails:_,isLoading:d,isOwnProfile:a})]}),a?(0,P.jsx)("button",{type:"button",className:j,onClick:()=>{C(!0)},children:"Log Out"}):_.isFollowing?(0,P.jsx)("button",{type:"button",className:j,onClick:()=>{(async()=>{try{if(!s)return;if(await(0,g.Qt)(_.id),k((e=>({...e,followersCount:_.followersCount-1,isFollowing:!1}))),"followers"===R){const e=await(0,g.ri)({id:s,page:1,limit:c});r((0,N.dT)(e.followers))}}catch(e){S.oR.error("Error occured: ".concat(e.message)),console.error(e)}})()},children:"Following"}):(0,P.jsx)("button",{type:"button",className:j,onClick:()=>{(async()=>{try{if(!s)return;if(await(0,g.pV)(_.id),k((e=>({...e,followersCount:_.followersCount+1,isFollowing:!0}))),"followers"===R){const e=await(0,g.ri)({id:s,page:1,limit:c});r((0,N.dT)(e.followers))}}catch(e){(0,F.Qg)(e.message)}})()},children:"Follow"})]}),y&&(0,P.jsx)(x.default,{isOpen:y,onClose:A,children:(0,P.jsx)(p.default,{handleLogOut:()=>{r((0,w.ri)()),A(),i("/")},closeModal:A})})]})};var D=a(5475);const z="ProfileTabs_tabs_container__REqVB",q="ProfileTabs_tabs_list__jkHOB",G="ProfileTabs_tab_item__RX8Us",W="ProfileTabs_active__xNjl6",Y=e=>{let{userId:s,isOwnProfile:a}=e;const o=(0,l.zy)(),t=e=>{let{isActive:s}=e;return s?W:""};return(0,P.jsxs)("div",{className:z,children:[(0,P.jsxs)("ul",{className:q,children:[(0,P.jsx)("li",{className:G,children:(0,P.jsx)(D.k2,{to:"/user/".concat(s,"/recipies"),state:{from:o},className:t,children:a?"My recipes":"Recipes"})}),a&&(0,P.jsx)("li",{className:G,children:(0,P.jsx)(D.k2,{to:"/user/".concat(s,"/favorites"),state:{from:o},className:t,children:"My favorites"})}),(0,P.jsx)("li",{className:G,children:(0,P.jsx)(D.k2,{to:"/user/".concat(s,"/followers"),state:{from:o},className:t,children:"Followers"})}),a&&(0,P.jsx)("li",{className:G,children:(0,P.jsx)(D.k2,{to:"/user/".concat(s,"/following"),state:{from:o},className:t,children:"Following"})})]}),(0,P.jsx)(l.sv,{})]})},B=()=>{const{id:e}=(0,l.g)(),{user:s}=(0,t.d4)((e=>e.auth)),[a,m]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{s&&s.id&&e&&m(s.id===e)}),[s,e]),(0,P.jsxs)(n.default,{className:r,children:[(0,P.jsx)(u.M,{currentPageName:"profile"}),(0,P.jsx)(c.A,{children:"Profile"}),(0,P.jsx)(d.A,{children:"Reveal your culinary art, share your favorite recipe and create gastronomic masterpieces with us."}),(0,P.jsxs)("div",{className:i,children:[(0,P.jsx)(T,{userId:e,isOwnProfile:a}),(0,P.jsx)(Y,{userId:e,isOwnProfile:a})]}),(0,P.jsx)(_.A,{})]})}}}]);
//# sourceMappingURL=438.cfc47069.chunk.js.map